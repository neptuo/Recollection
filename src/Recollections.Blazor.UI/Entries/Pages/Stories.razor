@page "/stories"
@inherits StoriesModel

<div class="stories">
    <div class="story-new">
        <Validation ErrorMessages="ErrorMessages" />

        <form @onsubmit="@CreateAsync">
            <div class="row">
                <div class="col-md col-sm-12">
                    <input class="form-control" type="text" placeholder="Story title..." @bind="Title" />
                </div>
                <div class="col-md-auto col-sm-12">
                    <button class="btn btn-primary" type="submit">Create new story</button>
                </div>
            </div>
        </form>
    </div>

    <ListView Items="@Stories" IsLoading="@IsLoading" EmptyMessage="You don't have any story..." Context="story">
        <div class="story">
            <h2>
                <a href="@Navigator.UrlStoryDetail(story.Id)">
                    @story.Title
                </a>
            </h2>

            <span class="chapters">
                <Icon Identifier="book" />
                @story.Chapters chapters
            </span>

            <span class="entries">
                <Icon Identifier="comment-square" />
                @story.Entries entries
            </span>

            @if (story.MinDate != null || story.MaxDate != null)
            {
                <span class="dates">
                    <Icon Identifier="calendar" />

                    @if (story.MinDate != null)
                    {
                        @story.MinDate.Value.ToString(UiOptions.DateFormat)
                    }

                    @if (story.MinDate != story.MaxDate)
                    {
                        if (story.MinDate != null && story.MaxDate != null)
                        {
                            @: -
                        }

                        if (story.MaxDate != null)
                        {
                            @story.MaxDate.Value.ToString(UiOptions.DateFormat)
                        }
                    }
                </span>
            }
        </div>
    </ListView>
</div>